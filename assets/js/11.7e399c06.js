(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{413:function(e,n,s){"use strict";s.r(n);var t=s(2),r=Object(t.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("blockquote",[n("p",[e._v("转载自："),n("a",{attrs:{href:"https://www.cnblogs.com/king123/p/11326398.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("log4net服务启动后没有记录日志"),n("OutboundLink")],1)])]),e._v(" "),n("p",[e._v("有时候在用log4net的时候，调试或执行是ok的，但是安装服务后没有记录日志。\n这是因为服务启动是在C盘启动，而程序放的位置在别的目录。\n这时候需要指定读取配置文件的位置为程序所在的目录")]),e._v(" "),n("p",[e._v("原代码")]),e._v(" "),n("div",{staticClass:"language-C# line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('public static void Configure(string repositoryName ="LogFileAppender", string configFile = "log4net.config")\n{\n        //控制台应用程序加上以下两句代码\n        repository = LogManager.CreateRepository(repositoryName);\n        XmlConfigurator.Configure(repository, new FileInfo(configFile));\n\n        _log = LogManager.GetLogger(repositoryName, "Logger");\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("更新后")]),e._v(" "),n("div",{staticClass:"language-C# line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('public static void Configure(string repositoryName ="LogFileAppender", string configFile = "log4net.config")\n{\n        //获取日志绝对路径\n        string execuFilePath = Assembly.GetExecutingAssembly().Location;\n        string execuDirPath = Path.GetDirectoryName(execuFilePath);\n        string log4netconfigFilePath = execuDirPath + "\\\\"+ configFile;\n\n        \n        //控制台应用程序加上以下两句代码\n        repository = LogManager.CreateRepository(repositoryName);\n        XmlConfigurator.Configure(repository, new FileInfo(log4netconfigFilePath));\n\n        _log = LogManager.GetLogger(repositoryName, "Logger");\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);